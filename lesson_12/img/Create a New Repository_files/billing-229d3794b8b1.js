"use strict";(()=>{var Ee=Object.defineProperty;var s=(_,L)=>Ee(_,"name",{value:L,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["billing"],{6529:(_,L,d)=>{var u=d(13462),q=d.n(u),c=d(59753);(0,c.on)("submit",".js-braintree-encrypt",function({currentTarget:e}){const t=e.getAttribute("data-braintree-key");if(!t)throw new Error("Missing `data-braintree-key` attribute on element");window.Braintree.create(t).encryptForm(e)});var y=d(64463),S=d(75488);(0,c.on)("submit",".js-find-coupon-form",function(e){const t=e.target;if(!(t instanceof HTMLFormElement))return;const n=t.action,r=document.querySelector("#code");window.location.href=`${n}/${encodeURIComponent(r.value)}`,e.preventDefault()}),(0,c.on)("click",".js-choose-account",function(e){for(const r of document.querySelectorAll(".js-plan-row, .js-choose-plan"))r.classList.remove("selected");const t=document.querySelector(".js-plan");t.value="";for(const r of document.querySelectorAll(".js-billing-section"))r.classList.add("has-removed-contents");const n=e.currentTarget.closest(".js-account-row");if(n)if(n.getAttribute("data-org-data-collection-enabled")==="true"){const o=n.getAttribute("data-login");if(!o)return;const i=new URL(window.location.href,window.location.origin);let a="id";i.searchParams.get("org")?a="org":i.searchParams.get("organization_id")&&(a="organization_id"),i.searchParams.set(a,o),window.location.href=i.href}else b(n)}),(0,c.on)("click",".js-choose-plan",function(e){if(!(e.target instanceof Element))return;const t=e.target.closest(".js-plan-row");l(t)}),(0,y.N7)(".js-choose-plan-radio:checked",{add(e){l(e.closest(".js-plan-row"))}}),(0,y.N7)(".js-plan-row.selected",{add:h}),(0,y.N7)(".js-choose-account.selected",{add:h});function h(e){const t=e.closest("form");if(!t)return;const n=t.querySelector(".js-redeem-button");n instanceof HTMLButtonElement&&(n.disabled=e.classList.contains("free-plan"))}s(h,"enableNextButton");function b(e){const t=e.getAttribute("data-login"),n=e.getAttribute("data-plan");if(!t||!n)return;for(const w of document.querySelectorAll(".js-account-row, .js-choose-account"))w.classList.remove("selected");e.classList.add("selected");const r=e.querySelector(".js-choose-account");r&&r.classList.add("selected");const o=document.querySelector(".js-account");o&&(o.value=t);const i=document.querySelector(".js-plan-section");i&&(i.hidden=!1);for(const w of document.querySelectorAll(".js-billing-plans"))w.hidden=!0;const a=document.querySelector(`.js-billing-plans[data-login='${t}']`);if(!a)return;a.hidden=!1;const p=a.querySelectorAll(".js-plan-row"),v=p.length===1?p[0]:a.querySelector(`[data-name='${n}']`);v instanceof Element&&l(v)}s(b,"selectAccount");function C(e){const t=e.getAttribute("data-login"),n=e.getAttribute("data-plan");if(!t||!n)return;for(const a of document.querySelectorAll(".js-billing-plans"))a.hidden=!0;const r=document.querySelector(`.js-billing-plans[data-login='${t}']`);if(!r)return;r.hidden=!1;const o=r.querySelectorAll(".js-plan-row"),i=o.length===1?o[0]:r.querySelector(`[data-name='${n}']`);i instanceof Element&&l(i)}s(C,"selectPlanForDataCollection");function l(e){const t=e.getAttribute("data-name"),n=e.closest(".js-billing-plans");if(!n)return;const r=n.getAttribute("data-login");if(!r)return;const o=n.getAttribute("data-has-billing")==="true",i=parseInt(e.getAttribute("data-cost")||"",10);for(const E of document.querySelectorAll(".js-plan-row, .js-choose-plan"))E.classList.remove("selected");e.classList.add("selected");const a=e.querySelector(".js-choose-plan");a&&a.classList.add("selected");const p=e.querySelector(".js-choose-plan-radio");p instanceof HTMLInputElement&&(p.checked=!0);const v=document.querySelector(".js-plan");if(v&&(v.value=t||""),!document.querySelector(".js-coupons-data-collection-wrapper")){if(i===0||o){const E=document.querySelector(".js-billing-section");E&&E.classList.add("has-removed-contents")}else if(r){const E=document.querySelector(`.js-billing-section[data-login='${r}']`);E&&E.classList.remove("has-removed-contents")}}}s(l,"selectPlan"),async function(){await S.x;const e=document.querySelector(".js-account-row.selected");e&&b(e);const t=document.querySelector(".js-coupons-data-collection-wrapper");if(t)C(t);else{const n=document.querySelector(".js-plan-row.selected");n instanceof Element&&l(n)}}(),(0,c.on)("click",".js-enter-new-card",function(e){const t=e.currentTarget.closest(".js-zuora-existing-card"),n=document.querySelector(".js-billing-section"),r=document.querySelector(".js-enter-new-card");t.classList.add("d-none"),n.hidden=!1;const o=n.querySelector("iframe");o.setAttribute("width","100%");const i=r.getAttribute("data-sdn-data-collection")==="true"?"237":"677";o.setAttribute("height",i)}),(0,c.on)("click",".js-edit-card-details",function(e){const t=document.getElementById("zuora_payment"),n=e.currentTarget.closest(".js-zuora-billing-info"),r=document.querySelector(".js-billing-section");t.classList.toggle("d-none"),n.classList.toggle("d-none"),r.classList.remove("PaymentMethod--creditcard-added"),r.classList.add("PaymentMethod--creditcard")});const f={Australia:"AU00 000 000 000",Austria:"ATU000000000",Belgium:"BE0000000000",Bulgaria:"BG000000000",Croatia:"HR00000000000",Cyprus:"CY000000000X","Czech Republic":"CZ00000000...",Denmark:"DK00 00 00 00",Estonia:"EE000000000",Finland:"FI00000000",France:"FRXX 000000000",Germany:"DE000000000",Greece:"EL000000000",Hungary:"HU00000000",Iceland:"IS...",India:"IN00000000000",Ireland:"IE0000000XA",Italy:"IT00000000000",Japan:"000000000000",Latvia:"LV00000000000",Lithuania:"LT000000000...",Luxembourg:"LU00000000",Malta:"MT00000000",Netherlands:"NL000000000B00","New Zealand":"NZ0000000000000",Norway:"NO000000000MVA",Poland:"PL0000000000",Portugal:"PT000000000",Romania:"RO0000000000",Russia:"RU0000000000",Slovakia:"SK0000000000",Slovenia:"SI00000000",Spain:"ES...",Sweden:"SE000000000000",Switzerland:"CHE000000000TVA",Taiwan:"00000000","United Kingdom":"GB000000000"},g=["Angola","Antigua and Barbuda","Aruba","Bahamas","Belize","Benin","Botswana","Cameroon","Comoros","Congo (Brazzaville)","Congo (Kinshasa)","Cook Islands","C\xF4te d'Ivoire","Djibouti","Dominica","Fiji","French Southern Lands","Ghana","Guyana","Hong Kong","Ireland","Kiribati","Korea, North","Malawi","Maritania","Mauritius","Montserrat","Nauru","Niue","Qatar","Saint Kitts and Nevis","Saint Lucia","Sao Tome and Principe","Seychelles","Sierra Leone","Sint Maarten (Dutch part)","Solomon Islands","Somalia","Suriname","Syria","Togo","Tokelau","Tonga","United Arab Emirates","Vanuatu","Yemen","Zimbabwe"],P="United States of America",A="Canada";function N(e){let t;const n=e.options[e.selectedIndex];n&&(t=n.textContent);const r=t?f[t]:null,o=e.closest(".js-setup-creditcard");o.classList.toggle("is-vat-country",r!=null);const i=o.querySelector(".js-vat-help-text");i.textContent=r?`(${r})`:"";const a=o.querySelector(".js-select-state");if(o.classList.toggle("is-international",t!==P&&t!==A),a.required=t===P,t!==P&&(a.value=""),t===A){const w=o.querySelector(".js-select-province"),E=o.querySelector(".js-region-label");E.textContent="Province",w.disabled=!1,w.required=!0,a.classList.add("d-none"),w.classList.remove("d-none")}else{const w=o.querySelector(".js-select-province"),E=o.querySelector(".js-region-label");E.textContent="State",w.disabled=!0,w.required=!1,w.value="",a.classList.remove("d-none"),w.classList.add("d-none")}const p=o.querySelector(".js-postal-code-field"),v=g.indexOf(t||"")>=0;o.classList.toggle("no-postcodes",v),p.required=!v,v&&(p.value="")}s(N,"setupCountryFields"),(0,y.N7)(".js-select-country",{constructor:HTMLSelectElement,initialize(e){N(e),e.form&&(0,c.f)(e.form,"change"),e.addEventListener("change",function(){N(e)})}}),(0,c.on)("change",".js-payment-methods .js-payment-method",M),(0,c.on)("click",".js-payment-method-href",M);function M(e){if(!(e.currentTarget instanceof Element))return;const t=e.currentTarget.closest(".js-payment-methods"),n=e.currentTarget.getAttribute("data-selected-tab"),r=t.querySelectorAll(".js-selected-payment-method");for(const i of r)i.classList.remove("active");t.querySelector(`.${n}`).classList.add("active");const o=t.closest(".js-billing-section");if(o)if(n==="pay-with-paypal"){o.classList.add("PaymentMethod--paypal"),o.classList.remove("PaymentMethod--creditcard"),o.classList.remove("PaymentMethod--creditcard-added");const i=document.querySelector(".js-zuora-billing-info"),a=document.querySelector(".js-zuora-payment-page");i.classList.add("d-none"),a.classList.remove("d-none")}else n==="pay-by-credit-card"&&(o.classList.remove("PaymentMethod--paypal"),o.classList.add("PaymentMethod--creditcard"))}s(M,"handlePaymentMethodChange"),(0,y.N7)(".js-selected-payment-method:not(.active)",{add(e){e.classList.add("has-removed-contents")},remove(e){e.classList.remove("has-removed-contents")}}),(0,y.N7)(".js-billing-payment-methods",function(e){e.classList.remove("disabled")});const I=["paypal-loading","paypal-logged-in","paypal-logged-out","paypal-down"];function F(e,t,n){const{onSuccess:r}=n;return new Promise(o=>q().setup(e,t,Object.assign({},n,{onSuccess:()=>{r(),o()}})))}s(F,"braintreeSetup");function R(e,t){e.classList.remove(...I),I.indexOf(t)>=0&&e.classList.add(t)}s(R,"setPaypalState");async function O(e){const t=e.getAttribute("data-token");if(t)return t;const n=await fetch("/account/billing/client_token",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw new Error("Response is not OK");return await n.text()}s(O,"getClientToken");async function B(e){const t=e.closest(".js-payment-methods");if(!t.classList.contains("paypal-loading")&&!t.classList.contains("paypal-logged-in")){e.innerHTML="",R(t,"paypal-loading");try{const n=await O(t);t.hasAttribute("data-token")||t.setAttribute("data-token",n);const r=e.getAttribute("data-nonce-field"),o=t.querySelector(r);await F(n,"paypal",{container:e,displayName:"GitHub",paymentMethodNonceInputField:o,enableCORS:!0,onSuccess(){R(t,"paypal-logged-in");const p=document.querySelector(".js-awaiting-payment");p&&p.getAttribute("data-toggle-plan-upgrade-visibility")==="true"&&p.toggleAttribute("hidden")},onReady(){R(t,"paypal-logged-out")}});const i=document.querySelector("#bt-pp-cancel");i.setAttribute("type","button");const a=document.querySelector(".js-paypal-cancel-icon").cloneNode(!0);a instanceof Element&&a.classList.remove("d-none"),i.appendChild(a)}catch(n){throw R(t,"paypal-down"),n}}}s(B,"setupBraintreePaypal"),(0,c.on)("click","#bt-pp-cancel",function(e){const t=e.currentTarget.closest(".js-payment-methods");R(t,"paypal-logged-out");const n=e.currentTarget.closest(".js-paypal-container");B(n)}),(0,y.N7)(".js-paypal-container",{add(e){e.closest(".active")!=null&&B(e)}});var D=d(10174),m=d(18994);(0,y.N7)("input.js-plan-choice:checked",{constructor:HTMLInputElement,add(e){const t=e.value==="free";for(const a of document.querySelectorAll(".js-plan-choice-label"))a.classList.toggle("open",a===e);const n=e.closest(".js-plan-choice-label");if(n){const a=n.querySelector(".js-addon-purchase-field");a instanceof HTMLInputElement&&(0,D.dY)(a),e.checked&&n.classList.add("open")}const r=e.classList.contains("js-data-ghe-cloud-trial")&&e.value==="business_plus",o=t||r;for(const a of document.querySelectorAll(".js-billing-section"))a.classList.toggle("has-removed-contents",o);if(t){const a=document.querySelector(".js-contact-us");a!=null&&a.classList.add("d-none");const p=document.querySelector(".js-purchase-button");p!=null&&p.removeAttribute("disabled")}if((document.querySelector("input.js-enterprise-choice[value=server]:checked")&&e.value==="business_plus")===!0){const a=document.querySelector(".SignUpContinueActions");a!=null&&a.classList.add("has-removed-contents")}}}),(0,c.on)("change","input.js-duration-change",function({currentTarget:e}){const t=document.querySelector(".js-upgrade-plan-change:checked"),n=document.querySelector("#js-pjax-container");let r=`?plan_duration=${e.value}`;document.querySelector(".js-transform-user")&&(r=`${r}&transform_user=1`),t instanceof HTMLInputElement?(0,m.ZP)({url:`${r}&new_plan=${t.value}`,container:n}):(0,m.ZP)({url:r,container:n})}),(0,c.on)("change","input.js-upgrade-plan-change",function({currentTarget:e}){const t=document.querySelector("#js-pjax-container");let n=`?new_plan=${e.value}`;document.querySelector(".js-transform-user")&&(n=`${n}&transform_user=1`),(0,m.ZP)({url:n,container:t})}),(0,c.on)("change","input.js-org-duration-change",function({currentTarget:e}){const t=document.querySelector("#js-pjax-container"),n=new URL(document.location.href,window.location.origin).searchParams;if(document.querySelectorAll(".js-experiment-seats").length>0){const r=document.querySelector("#seats");n.set("plan_duration",e.value),n.set("memberships",r.value)}else{const r=document.querySelector(".js-upgrade-org-plan-change:checked"),o=document.querySelector(".js-account-name");n.set("plan",r.value),n.set("plan_duration",e.value),n.set("org",o.value)}e.hasAttribute("data-show-team-as-link")&&n.set("source","trial_upgrade"),(0,m.ZP)({url:`?${n.toString()}`,container:t})}),(0,c.on)("change","input.js-upgrade-org-plan-change",function({currentTarget:e}){const t=document.querySelector(".js-account-name"),n=document.querySelector("#js-pjax-container"),r=new URL(document.location.href,window.location.origin).searchParams;r.set("plan",e.value),r.set("org",t.value),(0,m.ZP)({url:`?${r.toString()}`,container:n})});var j=d(46263),T=d(71692);let x=null,$="month";async function z(e){var t;const n=e.value,r=new URL(e.getAttribute("data-url"),window.location.origin),o=new URLSearchParams(r.search.slice(1));o.append("seats",n),document.querySelectorAll(".js-experiment-seats").length>0&&($=((t=document.querySelector(".js-org-duration-change:checked"))==null?void 0:t.value)||"month",o.append("experiment","true"),o.append("plan_duration",$)),r.search=o.toString(),x==null||x.abort();const{signal:i}=x=new AbortController;let a=null;try{const v=await fetch(r.toString(),{signal:i,headers:{Accept:"application/json"}});if(!v.ok)return;a=await v.json()}catch{}if(i.aborted||!a)return;const p=a.selectors;for(const v in p)for(const w of document.querySelectorAll(v))w.innerHTML=p[v]}s(z,"updateTotals"),(0,y.N7)(".js-trial-upgrade-seats",{constructor:HTMLInputElement,add(e){z(e),(0,D.oq)(e,function(){z(e)})}});let W=1,K=Number.MAX_SAFE_INTEGER;const Z=300;(async function(){await S.x;const e=document.getElementById("seats"),t=document.getElementById("plan_duration_month");t&&($=t.checked?"month":"year"),e&&(W=Number(e.getAttribute("data-minimum")),K=Number(e.getAttribute("data-maximum")),U(e),z(e))})(),document.addEventListener("pjax:end",function(){const e=document.getElementById("seats");U(e)}),document.addEventListener(T.QE.SUCCESS,function(){const e=document.getElementById("seats");U(e)}),(0,c.on)("click","#increase-seats-number",function(){const e=document.getElementById("seats");if(!e||e.disabled)return;const t=Number(e.value)+1;e.value=t.toString(),U(e),z(e)}),(0,c.on)("click","#decrease-seats-number",function(){const e=document.getElementById("seats");if(!e||e.disabled)return;const t=Number(e.value)-1;e.value=t.toString(),U(e),z(e)});const ne=(0,j.D)(e=>{const t=e.target;!t||t.disabled||(U(t),z(t))},200);function U(e){if(!e||e.disabled)return;const t=Number(e.value),n=document.getElementById("plan_duration_year");!t||t<W?(e.value=W.toString(),document.querySelector(".js-minimum-seats").hidden=!1):n.checked&&n.classList.contains("js-discount-allowed")&&t>Z?(e.value=Z.toString(),document.querySelector(".js-maximum-seats").hidden=!1):t>K?(e.value=K.toString(),document.querySelector(".js-maximum-seats").hidden=!1):(document.querySelector(".js-minimum-seats").hidden=!0,document.querySelector(".js-maximum-seats").hidden=!0)}s(U,"limitSeats"),(0,y.N7)("#seats",e=>{e.addEventListener("keyup",ne)});var H=d(45975),oe=d(51012),re=d(91385);async function ae(e){const t=e.getAttribute("data-url"),n=e.getAttribute("data-organization-id"),r=e.getAttribute("data-business-id"),o=e.getAttribute("data-signature-view-context"),i=e.getAttribute("data-manual-payment"),a=new URLSearchParams;n&&a.append("organization_id",n),o&&a.append("view_context",o),r&&a.append("business_id",r),i&&a.append("manual_payment",i);const p=await fetch(`${t}?${a.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!p.ok){const w=e.getAttribute("data-general-signature-error-message")||"";G(w);const E=new Error,k=p.statusText?` ${p.statusText}`:"";throw E.message=`HTTP ${p.status}${k}`,E}const v=await p.json();if(e.classList.contains("js-zuora-payment-page")){if(v.error){G(v.error);return}const w=e.getAttribute("data-id");X(e,v,{creditCardHolderName:w},le)}else X(e,v,{creditCardHolderName:"GitHub Organization"},de)}s(ae,"setupZuoraHostedPaymentsPage");async function se(e,t,n){const r=new URLSearchParams;r.append("payment_method_id",e.refId),t&&r.append("organization_id",t);const o=await fetch(`/settings/billing/payment_method?${r.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!o.ok){const i=new Error,a=o.statusText?` ${o.statusText}`:"";throw i.message=`HTTP ${o.status}${a}`,i}n(await o.json())}s(se,"fetchPaymentMethodDetails");function ie(e){return(t,n,r)=>{var o;let i=r;const a=JSON.parse(e.getAttribute("data-error-messages"));switch(t){case"error":(0,re.Fk)(e),((o=i.match(/Attempt_Exceed_Limitation/))==null?void 0:o.input)?i=a.attempts_exceeded_limit_error:i=a.processor_declined_error;break}H.Z.sendErrorMessageToHpm(t,i)}}s(ie,"errorMessageCallback");async function V(e,t,n=5,r=1e3){if(n===0)throw new Error("Max retries exhausted");let o=`/settings/billing/bill_pay/${e}`;if(t){const a=new URLSearchParams;a.append("organization_id",t),o=`${o}?${a.toString()}`}const i=await fetch(o,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(i.status===200)return i;if(i.status===202)return await new Promise(a=>setTimeout(a,r)),V(e,t,n-1,r*1.5);throw new Error(`Unexpected ${i.status} response from poll endpoint`)}s(V,"pollPayment");function ce(e,t){return async n=>{if(t(n),n.success==="true"){const r=document.querySelector(".js-payment-method-form");if(r){if(!(r instanceof HTMLFormElement))return;const o=e.getAttribute("data-redirect-to");if(o)if(n.AuthorizeResult==="Approved"){const i=e.getAttribute("data-organization-id"),a=document.querySelector(".js-payment-verification-spinner"),p=document.querySelector(".js-payment-verification-success"),v=document.querySelector(".js-payment-method-section-wrapper"),w=document.querySelector(".js-payment-still-processing");try{v.hidden=!0,a.hidden=!1,await V(n.PaymentId,i),a.hidden=!0,p.hidden=!1}catch{a.hidden=!0,w.hidden=!1,await new Promise(k=>setTimeout(k,3e3))}await new Promise(E=>setTimeout(E,150)),window.location.replace(o)}else{const i=`Unknown AuthorizationResult ${n.AuthorizeResult}`,a=new ErrorEvent("Unknown auth result",{error:new Error(i)});(0,oe.LN)(a),window.location.replace(o)}else r.submit()}else{const o=e.getAttribute("data-organization-id");se(n,o,i=>{const a=document.querySelector(".js-zuora-billing-info"),p=a.querySelector(".js-new-card-type"),v=a.querySelector(".js-new-card-number"),w=i.masked_number.replace(/\*/g,""),E=e.closest(".js-billing-section"),k=document.querySelector(".js-awaiting-payment");p.textContent=i.card_type,v.textContent=w,e.classList.add("d-none"),a.classList.remove("d-none"),k&&k.toggleAttribute("hidden"),E.classList.remove("PaymentMethod--creditcard"),E.classList.add("PaymentMethod--creditcard-added")})}}}}s(ce,"zuoraSuccessCallback");function X(e,t,n,r){const o=Object.assign({},t.prepopulate,n);delete t.prepopulate,H.Z.renderWithErrorHandler(t,o,ce(e,r),ie(e))}s(X,"loadZuora");function le(e){if(e.success==="true"){const t=document.querySelector(".js-zuora-billing-info"),n=t.querySelector(".js-zuora-payment-method-id"),r=t.querySelector(".js-zuora-select-country"),o=t.querySelector(".js-zuora-select-region"),i=t.querySelector(".js-zuora-select-postal-code");n.value=e.refId,r.value=r.value||e.creditCardCountry,o.value=o.value||e.creditCardState,i.value=i.value||e.creditCardPostalCode}}s(le,"paymentMethodPageCallback");function de(e){const t=new URLSearchParams;t.append("success",e.success),t.append("response_from",e.responseFrom),e.success?t.append("ref_id",e.refId):(t.append("error_code",e.errorCode),t.append("error_message",e.errorMessage));const n=`pay?${t.toString()}`;window.location.replace(n)}s(de,"invoicePaymentCallback");function ue(){const e=document.getElementById("z_hppm_iframe");e!=null&&(e.setAttribute("height","100%"),e.setAttribute("width","100%"),H.Z.post(e.id,"resize"))}s(ue,"resizeZuoraIframe");function G(e){const t=document.querySelector(".js-zuora-spinner");t&&(t.textContent=e)}s(G,"replaceSpinnerWithMessage"),(0,y.N7)("#zuora_payment",{constructor:HTMLElement,add(e){if(e.classList.contains("js-zuora-payment-page")){const n=document.querySelector(".js-zuora-spinner");n&&n.classList.remove("d-none"),e.style.opacity="0",H.Z.runAfterRender(()=>{n&&n.classList.add("d-none"),e.style.opacity="1",window.addEventListener("resize",(0,j.D)(ue,200))})}ae(e)}});const Q="United States of America",Y="Canada";(0,c.on)("click",".js-edit-user-personal-profile",me),(0,c.on)("click",".js-sponsors-cancel-billing-info",pe),(0,c.on)("click",".js-view-user-personal-profile",fe),(0,c.on)("click",".js-edit-paypal-method",ye),(0,c.on)("click",".js-enter-new-card",he),(0,c.on)("click",".js-edit-payment-method-btn",ge),(0,c.on)("click",".js-cancel-edit-payment-method-btn",Se),(0,c.on)("click",".js-sponsors-cancel-edit-payment-method-btn",ve),(0,c.on)("click",".js-add-billing-information-btn",be),(0,c.on)("click",".js-cancel-submit-personal-profile-btn",je),(0,c.on)("click",".js-dismiss-flash-message",we);function J(e){var t;const n=(t=e.options[e.selectedIndex])==null?void 0:t.textContent,r=e.closest(".js-name-address-collection"),o=r.querySelector(".js-select-state"),i=r.querySelector(".js-name-address-state"),a=r.querySelector(".js-name-address-select-province"),p=document.getElementsByClassName("js-region-label");n===Q?(o.required=!0,o.id="account_screening_profile_region",o.disabled=!1,o.hidden=!1):(o.disabled=!0,o.required=!1,o.value="",o.removeAttribute("id"),o.hidden=!0),n===Y?(a.disabled=!1,a.required=!0,a.id="account_screening_profile_region",a.hidden=!1):(a.disabled=!0,a.required=!1,a.value="",a.removeAttribute("id"),a.hidden=!0),n===Q||n===Y?(i.disabled=!0,i.value="",i.removeAttribute("id"),i.hidden=!0,p[0].classList.add("required-asterisked")):(i.disabled=!1,i.id="account_screening_profile_region",i.hidden=!1,p[0].classList.remove("required-asterisked"))}s(J,"name_address_form_setupCountryFields"),(0,y.N7)(".js-name-address-select-country",{constructor:HTMLSelectElement,initialize(e){J(e),e.form&&(0,c.f)(e.form,"change"),e.addEventListener("change",function(){J(e)})}}),(0,y.N7)(".js-sponsors-handle-cancel-edit-payment .pay-by-credit-card .js-zuora-existing-card",{constructor:HTMLElement,add(){ee(),document.querySelector(".payment-methods").classList.remove("js-sponsors-handle-cancel-edit-payment")}});function me(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-edit-user-personal-profile-wrapper");t.hidden=!0;const n=document.querySelector(".js-name-address-collection-wrapper");n.hidden=!1;const r=document.querySelector(".js-user-personal-profile-summary");r.hidden=!0;const o=document.querySelector(".js-sponsors-cancel-billing-info");o&&(o.hidden=!1);const i=document.querySelector(".js-awaiting-payment");i&&(i.hasAttribute("hidden")||(i.hidden=!0));const a=document.querySelector(".js-sponsors-form");a&&(a.hidden=!0);const p=document.querySelector(".js-marketplace-form-wrapper");p&&(p.hidden=!0);const v=document.querySelector(".js-sdn-screening-error-wrapper");v&&(v.hidden=!0);const w=document.querySelector(".js-payment-methods-wrapper");w&&(w.hidden=!0);const E=document.querySelector(".js-coupons-form-wrapper");E&&(E.hidden=!0);const k=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");k&&!k.hidden&&k.click()}s(me,"handleEditAccountScreeningProfile");function pe(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-sponsors-cancel-billing-info");t.hidden=!0;const n=document.querySelector(".js-name-address-collection-wrapper");n.hidden=!0;const r=document.querySelector(".js-user-personal-profile-summary");r.hidden=!1;const o=document.querySelector(".js-edit-user-personal-profile-wrapper");o.hidden=!1;const i=document.querySelector(".js-payment-methods-wrapper");i.hidden=!1;const a=document.querySelector(".js-sponsors-form");a&&(a.hidden=!1)}s(pe,"handleSponsorsCancelBillingInfo");function fe(){fetch("/account/user_profile_view?flow_from_page=SPONSORABLE",{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})}s(fe,"handleViewAccountScreeningProfile");function ye(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-awaiting-payment");t&&(t.hidden=!0);const n=document.querySelector(".js-sponsors-form");n&&(n.hidden=!0);const r=document.querySelector(".js-marketplace-form-wrapper");r&&(r.hidden=!0);const o=document.querySelector(".js-payment-methods-radio");o.hidden=!1;const i=document.querySelector(".js-billing-pay-with");i&&(i.hidden=!1);const a=document.querySelector(".js-existing-paypal-summary");a.hidden=!0;const p=document.querySelector(".js-paypal-method-details");p.hidden=!1;const v=document.querySelector(".js-paypal-payment-method-form");v.hidden=!1}s(ye,"handleEditPayPalPaymentMethod");function he(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-awaiting-payment");t&&(t.hidden=!0);const n=document.querySelector(".js-sponsors-form");n&&(n.hidden=!0);const r=document.querySelector(".js-marketplace-form-wrapper");r&&(r.hidden=!0);const o=document.querySelector(".js-billing-pay-with");o&&(o.hidden=!1);const i=document.querySelector(".js-payment-methods-radio");i&&(i.hidden=!1);const a=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");a&&(a.hidden=!1)}s(he,"handleEditCreditCardPaymentMethod");function ge(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-update-billing-information-banner");if(!document.querySelector(".js-billing-information-summary"))t.hidden=!1,te();else{t.hidden=!0;const r=document.querySelector(".js-payment-summary-wrapper");r.hidden=!0;const o=document.querySelector(".js-payment-method-section-wrapper");o.hidden=!1;const i=document.querySelector(".js-edit-payment-method-btn");i.hidden=!0;const a=document.querySelector("#z_hppm_iframe");a!=null&&(a.setAttribute("height","100%"),a.setAttribute("width","100%")),window.dispatchEvent(new Event("resize"))}}s(ge,"handleEditPaymentMethod");function Se(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-payment-summary-wrapper");t.hidden=!1;const n=document.querySelector(".js-payment-method-section-wrapper");n.hidden=!0;const r=document.querySelector(".js-edit-payment-method-btn");r.hidden=!1}s(Se,"handleCancelEditPaymentMethod");function ve(e){if(!(e.currentTarget instanceof Element))return;document.querySelector(".js-paypal-payment-method-form")==null?ee():(document.querySelector(".payment-methods").classList.add("js-sponsors-handle-cancel-edit-payment"),document.querySelector("#pay-by-credit-card").click())}s(ve,"handleSponsorsCancelEditPaymentMethod");function ee(){const e=document.querySelector(".js-billing-section");e.hidden=!0;const t=document.querySelector(".js-billing-pay-with");t.hidden=!0;const n=document.querySelector(".js-payment-methods-radio");n.hidden=!0;const r=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");r.hidden=!0;const o=document.querySelector(".js-sponsors-form");o&&(o.hidden=!1);const i=document.querySelector(".js-zuora-existing-card");i&&i.classList.remove("d-none")}s(ee,"sponsorsHidePaymentMethod");function be(e){e.currentTarget instanceof Element&&te()}s(be,"handleAddBillingInformation");function te(){const e=document.querySelector(".js-billing-information-summary-wrapper");e.hidden=!0;const t=document.querySelector(".js-name-address-collection-wrapper");t.hidden=!1;const n=document.querySelector(".js-add-billing-information-btn");n.hidden=!0;const r=document.querySelector(".js-no-billing-information-message");r&&(r.hidden=!0);const o=document.querySelector(".js-org-payment-method-wrapper");o&&(o.hidden=!0)}s(te,"addBillingInformationHelper");function je(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-billing-information-summary-wrapper");t.hidden=!1;const n=document.querySelector(".js-name-address-collection-wrapper");n.hidden=!0;const r=document.querySelector(".js-add-billing-information-btn");r.hidden=!1;const o=document.querySelector(".js-no-billing-information-message");o&&(o.hidden=!1)}s(je,"handleCancelAddBillingInformation");function we(e){if(!(e.currentTarget instanceof Element))return;const t=document.querySelector(".js-update-billing-information-banner");t.hidden=!0}s(we,"handleDismissMessage")},97261:(_,L,d)=>{d.d(L,{S:()=>y});function u(S){const h=document.querySelectorAll(S);if(h.length>0)return h[h.length-1]}s(u,"queryLast");function q(){const S=u("meta[name=analytics-location]");return S?S.content:window.location.pathname}s(q,"pagePathname");function c(){const S=u("meta[name=analytics-location-query-strip]");let h="";S||(h=window.location.search);const b=u("meta[name=analytics-location-params]");b&&(h+=(h?"&":"?")+b.content);for(const C of document.querySelectorAll("meta[name=analytics-param-rename]")){const l=C.content.split(":",2);h=h.replace(new RegExp(`(^|[?&])${l[0]}($|=)`,"g"),`$1${l[1]}$2`)}return h}s(c,"pageQuery");function y(){return`${window.location.protocol}//${window.location.host}${q()+c()}`}s(y,"requestUri")},51012:(_,L,d)=>{d.d(L,{LN:()=>f,aJ:()=>O,cI:()=>I,eK:()=>P,mT:()=>g});var u=d(71692),q=d(70290),c=d(82918),y=d(50232),S=d(28382),h=d(97261);let b=!1,C=0;const l=Date.now();function f(m){m.error&&A(M(N(m.error)))}s(f,"reportEvent");async function g(m){if(!!m.promise)try{await m.promise}catch(j){A(M(N(j)))}}s(g,"reportPromiseRejectionEvent");function P(m,j={}){m&&m.name!=="AbortError"&&A(M(N(m),j))}s(P,"reportError");async function A(m){var j,T;if(!D())return;const x=(T=(j=document.head)==null?void 0:j.querySelector('meta[name="browser-errors-url"]'))==null?void 0:T.content;if(!!x){if(R(m.error.stacktrace)){b=!0;return}C++;try{await fetch(x,{method:"post",body:JSON.stringify(m)})}catch{}}}s(A,"report");function N(m){return{type:m.name,value:m.message,stacktrace:I(m)}}s(N,"formatError");function M(m,j={}){return Object.assign({error:m,sanitizedUrl:(0,h.S)()||window.location.href,readyState:document.readyState,referrer:(0,u.wP)(),timeSinceLoad:Math.round(Date.now()-l),user:O()||void 0},j)}s(M,"errorContext");function I(m){return(0,S.Q)(m.stack||"").map(j=>({filename:j.file||"",function:String(j.methodName),lineno:(j.lineNumber||0).toString(),colno:(j.column||0).toString()}))}s(I,"stacktrace");const F=/(chrome|moz|safari)-extension:\/\//;function R(m){return m.some(j=>F.test(j.filename)||F.test(j.function))}s(R,"isExtensionError");function O(){var m,j;const T=(j=(m=document.head)==null?void 0:m.querySelector('meta[name="user-login"]'))==null?void 0:j.content;return T||`anonymous-${(0,c.b)()}`}s(O,"pageUser");let B=!1;window.addEventListener("pageshow",()=>B=!1),window.addEventListener("pagehide",()=>B=!0),document.addEventListener(u.QE.ERROR,m=>{A(M({type:"SoftNavError",value:m.detail,stacktrace:I(new Error)}))});function D(){return!B&&!b&&C<10&&(0,y.Gb)()&&!(0,q.Z)(document)}s(D,"reportable"),typeof BroadcastChannel=="function"&&new BroadcastChannel("shared-worker-error").addEventListener("message",j=>{P(j.data.error)})},91385:(_,L,d)=>{d.d(L,{$S:()=>q,Fk:()=>c,sz:()=>y});var u=d(77552);function q(S,h,b){const C={hydroEventPayload:S,hydroEventHmac:h,visitorPayload:"",visitorHmac:"",hydroClientContext:b},l=document.querySelector("meta[name=visitor-payload]");l instanceof HTMLMetaElement&&(C.visitorPayload=l.content);const f=document.querySelector("meta[name=visitor-hmac]")||"";f instanceof HTMLMetaElement&&(C.visitorHmac=f.content),(0,u.b)(C,!0)}s(q,"sendData");function c(S){const h=S.getAttribute("data-hydro-view")||"",b=S.getAttribute("data-hydro-view-hmac")||"",C=S.getAttribute("data-hydro-client-context")||"";q(h,b,C)}s(c,"trackView");function y(S){const h=S.getAttribute("data-hydro-click-payload")||"",b=S.getAttribute("data-hydro-click-hmac")||"",C=S.getAttribute("data-hydro-client-context")||"";q(h,b,C)}s(y,"sendHydroEvent")},31579:(_,L,d)=>{d.d(L,{Z:()=>q});class u{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}}s(u,"NoOpStorage");function q(c,y={throwQuotaErrorsOnSet:!1},S=window){let h;try{h=S[c]}catch{h=new u}const{throwQuotaErrorsOnSet:b}=y;function C(g){try{return h.getItem(g)}catch{return null}}s(C,"getItem");function l(g,P){try{h.setItem(g,P)}catch(A){if(b&&A.message.toLowerCase().includes("quota"))throw A}}s(l,"setItem");function f(g){try{h.removeItem(g)}catch{}}return s(f,"removeItem"),{getItem:C,setItem:l,removeItem:f}}s(q,"safeStorage")},30855:(_,L,d)=>{d.d(L,{LS:()=>c,cl:()=>y,rV:()=>q});var u=d(31579);const{getItem:q,setItem:c,removeItem:y}=(0,u.Z)("sessionStorage")},71692:(_,L,d)=>{d.d(L,{Ak:()=>N,F2:()=>j,F6:()=>O,FP:()=>P,LD:()=>g,OE:()=>f,Po:()=>l,QE:()=>y,Rl:()=>D,Xk:()=>F,Ys:()=>R,aN:()=>m,wP:()=>B});var u=d(30855),q=d(97261),c=d(77552);const y=Object.freeze({INITIAL:"soft-nav:initial",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",START:"soft-nav:start",END:"soft-nav:end"}),S="soft-navigation-fail",h="soft-navigation-referrer",b="soft-navigation-marker",C="reload";function l(){return(0,u.rV)(b)==="1"}s(l,"inSoftNavigation");function f(){return Boolean(M())}s(f,"hasSoftNavFailure");function g(){performance.mark(b),(0,u.LS)(b,"1"),(0,u.LS)(h,(0,q.S)()||window.location.href)}s(g,"startSoftNav");function P(){(0,u.LS)(b,"0")}s(P,"endSoftNav");function A(){(0,u.LS)(b,"0"),(0,u.cl)(h),(0,u.cl)(S)}s(A,"clearSoftNav");function N(T){(0,u.LS)(S,T||C)}s(N,"setSoftNavFailReason");function M(){return(0,u.rV)(S)}s(M,"getSoftNavFailReason");let I=0;function F(){I+=1,document.dispatchEvent(new CustomEvent(y.SUCCESS,{detail:I}))}s(F,"softNavSucceeded");function R(){const T=M()||C;document.dispatchEvent(new CustomEvent(y.ERROR,{detail:T})),I=0,A(),(0,c.b)({turboFailureReason:T})}s(R,"softNavFailed");function O(){document.dispatchEvent(new CustomEvent(y.INITIAL)),I=0,A()}s(O,"softNavInitial");function B(){return(0,u.rV)(h)||document.referrer}s(B,"getSoftNavReferrer");function D(){return performance.getEntriesByName(b).length===0?0:performance.measure(b,b).duration}s(D,"getDurationSinceLastSoftNav");function m(){document.dispatchEvent(new Event(y.START))}s(m,"beginProgressBar");function j(){document.dispatchEvent(new Event(y.END))}s(j,"completeProgressBar")},10174:(_,L,d)=>{d.d(L,{dY:()=>C,iU:()=>b,oq:()=>h});const u=new WeakMap;function q(l){const f=u.get(l);!f||(f.timer!=null&&clearTimeout(f.timer),f.timer=window.setTimeout(()=>{f.timer!=null&&(f.timer=null),f.inputed=!1,f.listener.call(null,l)},f.wait))}s(q,"schedule");function c(l){const f=l.currentTarget,g=u.get(f);!g||(g.keypressed=!0,g.timer!=null&&clearTimeout(g.timer))}s(c,"onKeydownInput");function y(l){const f=l.currentTarget,g=u.get(f);!g||(g.keypressed=!1,g.inputed&&q(f))}s(y,"onKeyupInput");function S(l){const f=l.currentTarget,g=u.get(f);!g||(g.inputed=!0,g.keypressed||q(f))}s(S,"onInputInput");function h(l,f,g={wait:null}){u.set(l,{keypressed:!1,inputed:!1,timer:void 0,listener:f,wait:g.wait!=null?g.wait:100}),l.addEventListener("keydown",c),l.addEventListener("keyup",y),l.addEventListener("input",S)}s(h,"addThrottledInputEventListener");function b(l,f){l.removeEventListener("keydown",c),l.removeEventListener("keyup",y),l.removeEventListener("input",S);const g=u.get(l);g&&(g.timer!=null&&g.listener===f&&clearTimeout(g.timer),u.delete(l))}s(b,"removeThrottledInputEventListener");function C(l){const f=u.get(l);f&&f.listener.call(null,l)}s(C,"dispatchThrottledInputEvent")}},_=>{var L=s(u=>_(_.s=u),"__webpack_exec__");_.O(0,["vendors-node_modules_selector-observer_dist_index_esm_js","vendors-node_modules_github_braintree-encryption_target_braintree-1_3_10_js-node_modules_gith-93a78d","app_assets_modules_github_behaviors_pjax_ts"],()=>L(6529));var d=_.O()}]);})();

//# sourceMappingURL=billing-47639e62b1e4.js.map